(function(){"use strict";var e={166:function(e,t,r){var s=r(144),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app",[e.$route.path.includes("login")?e._e():r("app-bar"),e.$route.path.includes("login")?e._e():r("side-bar"),r("v-main",[r("router-view")],1),r("fooster-bar")],1)},n=[],a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-app-bar",{attrs:{app:"",color:"primary",dark:"","hide-on-scroll":""},scopedSlots:e._u([{key:"extension",fn:function(){return[r("v-tabs",{attrs:{"align-with-title":""}},e._l(e.tabitems,(function(t,s){return r("v-tab",{key:s,attrs:{link:"",to:t.to}},[e._v(" "+e._s(t.name)+" ")])})),1)]},proxy:!0}])},[r("div",{staticClass:"d-flex align-center"},[e.$route.path.includes("dashboard")?e._e():r("v-app-bar-nav-icon",{on:{click:function(t){return t.stopPropagation(),e.drawerClick.apply(null,arguments)}}}),r("h1",[e._v("KT OneView")])],1),r("v-spacer"),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-magnify")])],1),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-heart")])],1),r("v-btn",{attrs:{icon:""}},[r("v-icon",[e._v("mdi-dots-vertical")])],1)],1)},i=[];const c=new s.Z;var l={name:"AppBar",data:()=>({drawer:!1,tabitems:[{name:"OneView",to:"/"},{name:"대쉬보드",to:"/dashboard"},{name:"지도분석",to:"/map"},{name:"상세분석",to:"/detail"},{name:"게시판",to:"/notice"}]}),methods:{drawerClick(){c.$emit("DRAWER_CLICK",this.drawer)}}},u=l,d=r(1001),m=r(3453),p=r.n(m),v=r(426),f=r(5206),h=r(680),g=r(6428),b=r(9762),w=r(4227),x=r(5090),_=(0,d.Z)(u,a,i,!1,null,null,null),y=_.exports;p()(_,{VAppBar:v.Z,VAppBarNavIcon:f.Z,VBtn:h.Z,VIcon:g.Z,VSpacer:b.Z,VTab:w.Z,VTabs:x.Z});var k=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-navigation-drawer",{attrs:{app:"",absolute:"",temporary:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[r("v-list-item",[r("v-list-item-content",[r("v-list-item-title",{staticClass:"text-h6"},[e._v(" Application ")]),r("v-list-item-subtitle",[e._v(" subtext ")])],1)],1),r("v-divider"),r("v-divider"),r("v-list",{attrs:{dense:"",nav:""}},e._l(e.items,(function(t){return r("v-list-item",{key:t.title,attrs:{link:""}},[r("v-list-item-icon",[r("v-icon",[e._v(e._s(t.icon))])],1),r("v-list-item-content",[r("v-list-item-title",[e._v(e._s(t.title))])],1)],1)})),1)],1)},Z=[],C={data:()=>({items:[{title:"Dashboard",icon:"mdi-view-dashboard"},{title:"Photos",icon:"mdi-image"},{title:"About",icon:"mdi-help-box"}],right:null,drawer:!1}),created(){console.log("created..."),c.$on("DRAWER_CLICK",(e=>{this.drawer=!e})),console.log(this.drawer)}},F=C,I=r(1418),V=r(6816),E=r(7620),A=r(352),S=r(459),P=r(7806),$=(0,d.Z)(F,k,Z,!1,null,null,null),O=$.exports;p()($,{VDivider:I.Z,VIcon:g.Z,VList:V.Z,VListItem:E.Z,VListItemContent:A.km,VListItemIcon:S.Z,VListItemSubtitle:A.oZ,VListItemTitle:A.V9,VNavigationDrawer:P.Z});var T=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-footer",{attrs:{padless:"",color:"primary"}},[r("v-col",{staticClass:"text-center",attrs:{cols:"12"}},[e._v(" "+e._s((new Date).getFullYear())+" — "),r("strong",[e._v("OneView")])])],1)},D=[],R=r(2102),j=r(899),N={},L=(0,d.Z)(N,T,D,!1,null,null,null),B=L.exports;p()(L,{VCol:R.Z,VFooter:j.Z});var W=r(629),q={name:"App",components:{AppBar:y,SideBar:O,FoosterBar:B},data:()=>({}),beforeCreate(){this.initializeStore;const e=this.aceess;this.$axios.default.headers.common["Authorization"]=e?"JWT"+e:""},mounted(){setInterval((()=>{this.getAccess()}),29e4)},computed:{...(0,W.rn)("auth",["access","refresh"])},methods:{...(0,W.OI)("auth",["setAccess","initializeStore"]),getAccess(){const e={refresh:this.refresh};this.$axios.post("/api/jwt/refresh/",e).then((e=>{const t=e.data.access;console.log(t),localStorage.setItem("access",t),this.setAccess(t)})).catch((e=>{console.log(e)}))}}},z=q,K=r(7524),M=r(7877),G=(0,d.Z)(z,o,n,!1,null,null,null),U=G.exports;p()(G,{VApp:K.Z,VMain:M.Z});var H=r(8345),J=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("span",{attrs:{src:e.userInfo}},[e._v(e._s(e.userInfo))])},X=[],Y={name:"HomeView",components:{},data:()=>({userInfo:{}}),mounted(){this.getUserInfo()},methods:{getUserInfo(){this.$axios.get("/api/users/me").then((e=>{console.log(e),this.userInfo=e.data})).catch((e=>{console.log(e)}))}}},Q=Y,ee=(0,d.Z)(Q,J,X,!1,null,null,null),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[r("v-row",{attrs:{align:"center",justify:"center"}},[r("v-col",{attrs:{cols:"12",sm:"8",md:"8"}},[r("v-card",{staticClass:"elevation-12"},[r("v-window",{model:{value:e.step,callback:function(t){e.step=t},expression:"step"}},[r("v-window-item",{attrs:{value:1}},[r("v-row",[r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-card-text",{staticClass:"mt-12"},[r("h1",{staticClass:"text-center display-2 primary--text text--accent-3"},[e._v(" KDAP-OneView ")]),r("h4",{staticClass:"text-center mt-4"},[e._v(" Ensure your kate id for registration ")]),r("v-form",{attrs:{id:"login-form"},on:{submit:function(t){return t.preventDefault(),e.login.apply(null,arguments)}}},[r("v-text-field",{attrs:{id:"username",label:"Kate 사번",name:"username","prepend-icon":"mdi-account",type:"text",color:"primary accent-3"},model:{value:e.loginForm.userID,callback:function(t){e.$set(e.loginForm,"userID",t)},expression:"loginForm.userID"}}),r("v-text-field",{attrs:{id:"password",label:"비밀번호",name:"password","prepend-icon":"mdi-lock",type:"password",color:"primary accent-3"},model:{value:e.loginForm.userPassword,callback:function(t){e.$set(e.loginForm,"userPassword",t)},expression:"loginForm.userPassword"}})],1)],1),r("div",{staticClass:"text-center mt-3"},[r("v-btn",{attrs:{rounded:"",color:"primary accent-3",dark:""},on:{click:e.login}},[e._v("로그인")])],1)],1),r("v-col",{staticClass:"primary accent-3",attrs:{cols:"12",md:"4"}},[r("v-card-text",{staticClass:"white--text mt-12"},[r("h1",{staticClass:"text-center display-1"},[e._v("Welcome to OneView!")]),r("h5",{staticClass:"text-center"},[e._v(" KDAP-OneView 접속 시, 계정권한 신청이 필요합니다. ")])]),r("div",{staticClass:"text-center"},[r("v-btn",{attrs:{rounded:"",outlined:"",dark:""},on:{click:function(t){e.step++}}},[e._v("권한 신청")])],1)],1)],1)],1),r("v-window-item",{attrs:{value:2}},[r("v-row",{staticClass:"fill-height"},[r("v-col",{staticClass:"primary accent-3",attrs:{cols:"12",md:"4"}},[r("v-card-text",{staticClass:"white--text mt-12"},[r("h1",{staticClass:"text-center display-1"},[e._v("Welcome Back!")]),r("h5",{staticClass:"text-center"},[e._v(" 계정권한이 있으시면, 로그인 해주세요! ")])]),r("div",{staticClass:"text-center"},[r("v-btn",{attrs:{rounded:"",outlined:"",dark:""},on:{click:function(t){e.step--}}},[e._v(" 로그인 페이지 ")])],1)],1),r("v-col",{attrs:{cols:"12",md:"8"}},[r("v-card-text",{staticClass:"mt-12"},[r("h1",{staticClass:"text-center display-2 primary--text text--accent-3"},[e._v(" Create Account ")]),r("h4",{staticClass:"text-center mt-4"},[e._v(" Ensure your email for registration ")]),r("v-form",{attrs:{id:"register-form"}},[r("v-text-field",{attrs:{label:"사번",name:"username","prepend-icon":"mdi-account-clock",rules:[function(e){return!!e||"ID is required"}],type:"text",color:"primary accent-3"},model:{value:e.registerForm.userID,callback:function(t){e.$set(e.registerForm,"userID",t)},expression:"registerForm.userID"}}),r("v-text-field",{attrs:{label:"이름",name:"first_name",rules:[function(e){return!!e||"Name is required"}],"prepend-icon":"mdi-account",type:"text",color:"primary accent-3"},model:{value:e.registerForm.userName,callback:function(t){e.$set(e.registerForm,"userName",t)},expression:"registerForm.userName"}}),r("v-text-field",{attrs:{label:"이메일",name:"email",rules:[function(e){return!!e||"Email is required"}],"prepend-icon":"mdi-email",color:"primary accent-3"},model:{value:e.registerForm.userEmail,callback:function(t){e.$set(e.registerForm,"userEmail",t)},expression:"registerForm.userEmail"}}),r("v-select",{attrs:{items:e.authList,"item-text":"name","item-value":"value",rules:[function(e){return!!e||"Auth is required"}],label:"요청권한","prepend-icon":"mdi-account-lock","return-object":""},model:{value:e.registerForm.userAuth,callback:function(t){e.$set(e.registerForm,"userAuth",t)},expression:"registerForm.userAuth"}}),r("v-text-field",{attrs:{label:"비밀번호",name:"password",rules:[function(e){return!!e||"Password is required"}],"prepend-icon":"mdi-lock",type:"password",color:"primary accent-3"},model:{value:e.registerForm.userPassword,callback:function(t){e.$set(e.registerForm,"userPassword",t)},expression:"registerForm.userPassword"}}),r("v-text-field",{attrs:{label:"비밀번호 확인",name:"password2",rules:[function(e){return!!e||"Password-confirm is required"}],"prepend-icon":"mdi-lock-plus",type:"password",color:"primary accent-3"},model:{value:e.registerForm.userPassword2,callback:function(t){e.$set(e.registerForm,"userPassword2",t)},expression:"registerForm.userPassword2"}})],1)],1),r("div",{staticClass:"text-center mt-n5"},[r("v-btn",{attrs:{rounded:"",color:"primary accent-3",dark:""},on:{click:e.registerSubmit}},[e._v("권한 요청")])],1)],1)],1)],1)],1)],1)],1)],1)],1)},se=[],oe={data:()=>({authList:[{name:"관리자",value:"ADMIN"},{name:"스탭",value:"STAFF"},{name:"임원",value:"EXECE"},{name:"직원",value:"USER"}],step:1,items:["관리자","임원","스탭","직원"],registerForm:{userID:"",userName:"",userEmail:"",userAuth:"",userPassword:"",userPassword2:""},loginForm:{userID:"",userPassword:""}}),props:{source:String},setup(){},created(){},mounted(){},unmounted(){},methods:{...(0,W.OI)("auth",["setAccess","setRefresh"]),login(){console.log("login() ..."),this.$axios.defaults.headers.common["Authorization"]="",localStorage.removeItem("access");const e={user_id:this.loginForm.userID,password:this.loginForm.userPassword};console.log(e),this.$axios.post("/api/jwt/create/",e).then((e=>{console.log(e);const t=e.data.access,r=e.data.refresh;this.setAccess(t),this.setRefresh(r),this.$axios.defaults.headers.common["Authorization"]="JWT "+t,localStorage.setItem("access",t),localStorage.setItem("refresh",r),this.$router.push("/")})).catch((e=>{console.log(e)}))},registerSubmit(){console.log("register init...");const e={name:this.registerForm.userName,email:this.registerForm.userEmail,organization:this.registerForm.userAuth.value,user_id:this.registerForm.userID,password:this.registerForm.userPassword,re_password:this.registerForm.userPassword2};console.log(e),this.$axios.post("/api/users/",e).then((e=>{console.log("REGISTER POST RES",e),alert(`user ${e.data.name} register OK`),this.me=e.data})).catch((e=>{console.log("REGISTER POST ERR.RESPONSE",e.response),alert("REGISTER Fail ")}))}}},ne=oe,ae=r(3237),ie=r(7118),ce=r(9846),le=r(6232),ue=r(2877),de=r(2982),me=r(5978),pe=r(6924),ve=r(7864),fe=(0,d.Z)(ne,re,se,!1,null,null,null),he=fe.exports;p()(fe,{VBtn:h.Z,VCard:ae.Z,VCardText:ie.ZB,VCol:R.Z,VContainer:ce.Z,VForm:le.Z,VRow:ue.Z,VSelect:de.Z,VTextField:me.Z,VWindow:pe.Z,VWindowItem:ve.Z}),s.Z.use(H.Z);const ge=[{path:"/login",name:"login",component:he},{path:"/",name:"home",component:te},{path:"/about",name:"about",component:()=>r.e(443).then(r.bind(r,9030))},{path:"/map",name:"map",component:()=>r.e(842).then(r.bind(r,1040))},{path:"/dashboard",name:"dashboard",component:()=>r.e(966).then(r.bind(r,1811))}],be=new H.Z({routes:ge});var we=be;const xe={namespaced:!0,state:{access:"",refresh:""},getters:{},mutations:{initializeStore(e){localStorage.getItem("access")?(e.access=localStorage.getItem("access"),e.refresh=localStorage.getItem("refresh")):(e.access="",e.refresh="")},setAccess(e,t){e.access=t},setRefresh(e,t){e.refresh=t}},actions:{}};var _e=xe;s.Z.use(W.ZP);const ye=new W.ZP.Store({strict:!0,modules:{auth:_e}});var ke=ye,Ze=r(9132);s.Z.use(Ze.Z);var Ce=new Ze.Z({}),Fe=r(9669),Ie=r.n(Fe);Ie().defaults.xsrfCookieName="csrftoken",Ie().defaults.xsrfHeaderName="X-CSRFToken",s.Z.prototype.$axios=Ie(),s.Z.config.productionTip=!1,new s.Z({router:we,store:ke,vuetify:Ce,render:e=>e(U)}).$mount("#app")}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={id:s,loaded:!1,exports:{}};return e[s].call(n.exports,n,n.exports,r),n.loaded=!0,n.exports}r.m=e,function(){var e=[];r.O=function(t,s,o,n){if(!s){var a=1/0;for(u=0;u<e.length;u++){s=e[u][0],o=e[u][1],n=e[u][2];for(var i=!0,c=0;c<s.length;c++)(!1&n||a>=n)&&Object.keys(r.O).every((function(e){return r.O[e](s[c])}))?s.splice(c--,1):(i=!1,n<a&&(a=n));if(i){e.splice(u--,1);var l=o();void 0!==l&&(t=l)}}return t}n=n||0;for(var u=e.length;u>0&&e[u-1][2]>n;u--)e[u]=e[u-1];e[u]=[s,o,n]}}(),function(){r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,{a:t}),t}}(),function(){r.d=function(e,t){for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,s){return r.f[s](e,t),t}),[]))}}(),function(){r.u=function(e){return"static/js/"+{443:"about",842:"map",966:"dashboard"}[e]+"."+{443:"9d6e4dab",842:"ab909ded",966:"e360ce9e"}[e]+".js"}}(),function(){r.miniCssF=function(e){}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={},t="front-end:";r.l=function(s,o,n,a){if(e[s])e[s].push(o);else{var i,c;if(void 0!==n)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==s||d.getAttribute("data-webpack")==t+n){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+n),i.src=s),e[s]=[o];var m=function(t,r){i.onerror=i.onload=null,clearTimeout(p);var o=e[s];if(delete e[s],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(r)})),t)return t(r)},p=setTimeout(m.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=m.bind(null,i.onerror),i.onload=m.bind(null,i.onload),c&&document.head.appendChild(i)}}}(),function(){r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){r.p="/"}(),function(){var e={143:0};r.f.j=function(t,s){var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)s.push(o[2]);else{var n=new Promise((function(r,s){o=e[t]=[r,s]}));s.push(o[2]=n);var a=r.p+r.u(t),i=new Error,c=function(s){if(r.o(e,t)&&(o=e[t],0!==o&&(e[t]=void 0),o)){var n=s&&("load"===s.type?"missing":s.type),a=s&&s.target&&s.target.src;i.message="Loading chunk "+t+" failed.\n("+n+": "+a+")",i.name="ChunkLoadError",i.type=n,i.request=a,o[1](i)}};r.l(a,c,"chunk-"+t,t)}},r.O.j=function(t){return 0===e[t]};var t=function(t,s){var o,n,a=s[0],i=s[1],c=s[2],l=0;if(a.some((function(t){return 0!==e[t]}))){for(o in i)r.o(i,o)&&(r.m[o]=i[o]);if(c)var u=c(r)}for(t&&t(s);l<a.length;l++)n=a[l],r.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return r.O(u)},s=self["webpackChunkfront_end"]=self["webpackChunkfront_end"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=r.O(void 0,[998],(function(){return r(166)}));s=r.O(s)})();
//# sourceMappingURL=app.bc7abb63.js.map